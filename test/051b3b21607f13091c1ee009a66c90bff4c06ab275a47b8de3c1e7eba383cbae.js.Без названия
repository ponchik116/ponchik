!function(){"use strict";var n={n:function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},d:function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},de=React,me=n.n(de),t=ReactDOM,pe=CoreUtilities,e=PropTypes,i=n.n(e),s=ReactUtilities,P=ReactStyleGuide,o={purchasingResources:{common:[],feature:"Purchasing.PurchaseDialog"},itemResources:{common:[],feature:"Feature.Item"},itemModelResources:{common:[],feature:"Feature.ItemModel"}},a={errorTypeIds:{transactionFailure:"TransactionFailureView",insufficientFunds:"InsufficientFundsView",priceChanged:"PriceChangedView"},errorStatusText:{badRequest:"Bad Request"},events:{startItemPurchase:"ItemPurchaseStart",NEW_UPSELL_FAILED_DUE_TO_ERROR:"ReactBuyButtonNewUpsellProcessFailedDueToError",NEW_UPSELL_FAILED_DUE_TO_LOADING:"ReactBuyButtonNewUpsellProcessFailedDueToNotLoaded",NEW_UPSELL_FROM_REACT_BUY_BUTTON:"ReactBuyButtonNewUpsellProcessNewUpsellFromReactBuyButton"},resources:{freeLabel:"Label.Free",okAction:"Action.Ok",insufficientFundsHeading:"Heading.InsufficientFunds",insufficientFundsMessage:"Message.InsufficientFunds",doneAction:"Action.Done",cancelAction:"Action.Cancel",buyRobuxAction:"Action.BuyRobux",buyAccessAction:"Action.BuyAccess",buyItemHeading:"Heading.BuyItem",buyNowAction:"Action.BuyNow",getItemHeading:"Heading.GetItem",getNowAction:"Action.GetNow",priceChangedHeading:"Heading.PriceChanged",priceChangedMessage:"Message.PriceChanged",balanceAfterMessage:"Message.BalanceAfter",agreeAndPayLabel:"Label.AgreeAndPay",promptGetFreeAccessMessage:"Message.PromptGetFreeAccess",promptGetFreeMessage:"Message.PromptGetFree",promptBuyAccessMessage:"Message.PromptBuyAccess",promptBuyMessage:"Message.PromptBuy",configureAction:"Action.Customize",notNowAction:"Action.NotNow",customizeAction:"Action.Customize",continueAction:"Action.Continue",purchaseCompleteHeading:"Heading.PurchaseComplete",successfullyBoughtAccessMessage:"Message.SuccessfullyBoughtAccess",successfullyBoughtMessage:"Message.SuccessfullyBought",successfullyRenewedAccessMessage:"Message.SuccessfullyRenewedAccess",successfullyRenewedMessage:"Message.SuccessfullyRenewed",successfullyAcquiredAccessMessage:"Message.SuccessfullyAcquiredAccess",successfullyAcquiredMessage:"Message.SuccessfullyAcquired",itemGrantDelayMessage:"Message.ItemGrantDelay",errorOccuredHeading:"Heading.ErrorOccured",purchasingUnavailableMessage:"Message.PurchasingUnavailable",buyAction:"Action.Buy",installAction:"Action.Install",getAction:"Action.Get",bestPriceLabel:"Label.BestPrice",priceLabel:"Label.Price",premiumDiscountOpportunityPromptLabel:"Label.PremiumDiscountOpportunityPrompt",premiumDiscountSavingsLabel:"Label.PremiumDiscountSavings",premiumExclusiveEligiblePromptLabel:"Label.PremiumExclusiveEligiblePrompt",premiumExclusiveIneligiblePromptLabel:"Label.PremiumExclusiveIneligiblePrompt",getPremiumAction:"Action.GetPremium",itemNotCurrentlyForSaleLabel:"Label.ItemNotCurrentlyForSale",itemNoLongerForSaleLabel:"Label.ItemNoLongerForSale",purchasingTemporarilyUnavailableLabel:"Label.PurchasingTemporarilyUnavailable",itemAvailableInventoryLabel:"Label.ItemAvailableInventory",noOneCurrentlySellingLabel:"Label.NoOneCurrentlySelling",inventoryAction:"Action.Inventory",OffsaleCountdownHourMinuteSecondLabel:"Label.OffsaleCountdownHourMinuteSecond",CountdownTimerDayHourMinute:"Label.CountdownTimerDayHourMinute",batchBuyItemHeading:"Heading.BuyItems",batchBuyPromptMessage:"Message.PromptBatchBuy",batchBuyBalanceAfterMessage:"Message.BalanceAfter",purchaseCompletedMessage:"Heading.PurchaseCompleted",generalPurchaseErrorMessage:"Heading.GeneralError",batchBuyPartialSuccessGeneralFailureMessage:"Heading.PartialSuccessGeneralFailure",batchBuyPartialSuccessItemsOwnedFailureMessage:"Heading.PartialSuccessItemsOwnedFailure",batchBuyPartialSuccessInsufficientFundsFailureMessage:"Heading.PartialSuccessInsufficientFundsFailure",batchBuyPartialSuccessNetworkErrorFailureMessage:"Heading.PartialSuccessNetworkErrorFailure",batchBuyPartialSuccessFloodcheckFailureMessage:"Heading.PartialSuccessFloodcheckFailure",purchaseErrorFailureMessage:"Heading.PurchaseFailure",batchBuyItemsOwnedFailureMessage:"Heading.ItemsOwnedFailure",insufficientFundsFailureMessage:"Heading.InsufficientFundsFailure",networkErrroFailureMessage:"Heading.NetworkErrorFailure",floodcheckFailureMessage:"Heading.FloodcheckFailure",batchBuyPartialSuccessPremiumNeededFailureMessage:"Heading.PartialSuccessPremiumNeededFailure",batchBuyPartialSuccessNoSellersFailureMessage:"Heading.PartialSuccessNoSellersFailure",premiumNeededFailureMessage:"Heading.PremiumNeededFailure",noSellersFailureMessage:"Heading.NoSellersFailure",batchBuyPartialSuccessInExperienceOnlyFailureMessage:"Heading.PartialSuccessInExperienceOnlyFailure",inExperienceOnlyFailureMessage:"Heading.InExperienceOnlyFailure"},assetTypes:{Plugin:38,Decal:13,Model:10,Video:62,MeshPart:40,Place:9,Badge:21,GamePass:34,Animation:24},assetCategory:{Catalog:0,Library:1},errorMessages:{insufficientFunds:"InsufficientFunds",retryErrorMessage:"Failed to determine purchasability status. Please try again by refreshing.",notForSale:"NotForSale",unauthorizedMessage:"Unauthorized",twoStepVerificationRequired:"TwoStepVerificationRequired"},batchBuyMaxThumbnails:3,maxBatchLoadRetries:5,floodcheckTime:5};function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=a.resources;function u(){var e=r((0,P.createModal)(),2),a=e[0],e=e[1];function t(e){var t=e.translate,r=e.title,n=e.message,e=e.onDecline,n=me().createElement("div",{className:"modal-message"},n);return me().createElement(a,{title:r,body:n,thumbnail:me().createElement("span",{className:"icon-warning-orange-150x150"}),neutralButtonText:t(c.okAction),onNeutral:e})}return t.defaultProps={onDecline:null},t.propTypes={translate:i().func.isRequired,title:i().string.isRequired,message:i().string.isRequired,onDecline:i().func},[(0,s.withTranslations)(t,o.purchasingResources),e]}var w=ReactDOMServer,I=CoreRobloxUtilities,fe=Roblox,d=fe.EnvironmentUrls.economyApi,m=fe.EnvironmentUrls.catalogApi,p=fe.EnvironmentUrls.apiGatewayUrl,f=fe.EnvironmentUrls.twoStepVerificationApi,b={getRobuxUpgradesUrl:function(e){return pe.urlService.getUrlWithQueries("/Upgrades/Robux.aspx",{ctx:e})},getAvatarPageUrl:function(){return pe.urlService.getAbsoluteUrl("/my/avatar")},getPurchaseItemUrl:function(e){return d+"/v1/purchases/products/"+e},getItemDetailsUrl:function(e,t){return m+"/v1/catalog/items/"+e+"/details?itemType="+t},postItemDetailsUrl:function(){return m+"/v1/catalog/items/details"},getPurchaseableDetailUrl:function(e){return d+"/v1/products/"+e+"?showPurchasable=true"},getPremiumConversionUrl:function(e,t){return"/premium/membership?ctx=WebItemDetail&upsellTargetType="+t+"&upsellTargetId="+e},getResellerDataUrl:function(e){return d+"/v1/assets/"+e+"/resellers?limit=10"},getInventoryUrl:function(e){return"/users/"+e+"/inventory"},getMetaDataUrl:function(){return d+"/v2/metadata"},getCurrentUserBalance:function(e){return d+"/v1/users/"+e+"/currency"},getPurchaseCollectibleItemUrl:function(e){return p+"/marketplace-sales/v1/item/"+e+"/purchase-item"},getPurchaseCollectibleItemInstanceUrl:function(e){return p+"/marketplace-sales/v1/item/"+e+"/purchase-resale"},getCollectibleItemDetailsUrl:function(){return p+"/marketplace-items/v1/items/details"},getTwoStepVerificationConfig:function(e){return f+"/v1/users/"+e+"/configuration"},postGenerateTwoStepVerificationToken:function(e){return d+"/v2/"+e+"/two-step-verification/generate"},postRedeemTwoStepVerificationChallenge:function(e){return d+"/v2/"+e+"/two-step-verification/redeem"},postBulkPurchaseUrl:function(){return p+"/cloud/v2/avatar-marketplace-orders"}},y=a.resources;function g(e){var t=e.translate,r=e.price,n=e.color,e=e.useFreeText;return 0===r&&e?me().createElement("span",{className:"text-robux text-free"},t(y.freeLabel)):me().createElement(me().Fragment,null,me().createElement("span",{className:"icon-robux".concat(n?"-".concat(n):"","-16x16")}),me().createElement("span",{className:"text-robux"},pe.numberFormat.getNumberFormat(r)))}g.defaultProps={color:"",useFreeText:!0},g.propTypes={price:i().number.isRequired,translate:i().func.isRequired,color:i().string,useFreeText:i().bool};var E=(0,s.withTranslations)(g,o.purchasingResources);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=a.resources;function R(){var e=v((0,P.createModal)(),2),a=e[0],e=e[1];function t(e){var t=e.translate,r=e.robuxNeeded,n=e.source,r=me().createElement("div",{className:"modal-message",dangerouslySetInnerHTML:{__html:t(A.insufficientFundsMessage,{robux:(0,w.renderToString)(me().createElement(E,{price:r}))})}});return me().createElement(a,h({title:t(A.insufficientFundsHeading),body:r,thumbnail:me().createElement("span",{className:"money-stack-icon"}),neutralButtonText:t(A.cancelAction),actionButtonText:t(A.buyRobuxAction),onAction:function(){return I.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(I.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_CATALOG_ROBUX_UPSELL,!0,I.paymentFlowAnalyticsService.ENUM_VIEW_NAME.ROBUX_UPSELL,I.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,I.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.BUY_ROBUX),window.location=b.getRobuxUpgradesUrl(n),!1},onClose:function(){I.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(I.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_CATALOG_ROBUX_UPSELL,!0,I.paymentFlowAnalyticsService.ENUM_VIEW_NAME.ROBUX_UPSELL,I.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,I.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.CANCEL)}},{actionButtonShow:!0}))}return t.defaultProps={onAccept:null,source:""},t.propTypes={translate:i().func.isRequired,source:i().string,onAccept:i().func,robuxNeeded:i().number.isRequired},[(0,s.withTranslations)(t,o.purchasingResources),e]}function be(){var e=document.getElementById("ItemPurchaseAjaxData");return e?{userRobuxBalance:parseInt(e.getAttribute("data-user-balance-robux"),10),userBc:parseInt(e.getAttribute("data-user-bc"),10),hasCurrencyServiceError:"True"===e.getAttribute("data-has-currency-service-error"),currencyServiceErrorMessage:e.getAttribute("data-currency-service-error-message")}:{}}var T=a.resources;function x(e){var t=e.translate,r=e.expectedPrice,e=e.currentRobuxBalance,r=(null!=e?e:be().userRobuxBalance)-r;return me().createElement("span",{dangerouslySetInnerHTML:{__html:t(T.balanceAfterMessage,{robuxBalance:(0,w.renderToString)(me().createElement(E,{price:r,color:"gray",useFreeText:!1}))})}})}x.propTypes={expectedPrice:i().number.isRequired,currentRobuxBalance:i().number,translate:i().func.isRequired},x.defaultProps={currentRobuxBalance:void 0};var C=(0,s.withTranslations)(x,o.purchasingResources);function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var D=a.resources;function O(){var e=M((0,P.createModal)(),2),l=e[0],e=e[1];function t(e){var t=e.translate,r=e.expectedPrice,n=e.currentPrice,a=e.onAction,i=e.loading,e=M((0,de.useState)(!1),2),s=e[0],o=e[1],r=me().createElement(me().Fragment,null,me().createElement("div",{className:"modal-message",dangerouslySetInnerHTML:{__html:t(D.priceChangedMessage,{robuxBefore:(0,w.renderToString)(me().createElement(E,{price:r,color:"gray"})),robuxAfter:(0,w.renderToString)(me().createElement(E,{price:n,color:"gray"}))})}}),me().createElement("div",{className:"modal-checkbox checkbox"},me().createElement("input",{id:"modal-checkbox-input",name:"agreementCheckBox",type:"checkbox",checked:s}),me().createElement("label",{onClick:function(){return o(!s)},htmlFor:"modal-checkbox-input"},t(D.agreeAndPayLabel))));return me().createElement(l,F({title:t(D.priceChangedHeading),body:r,neutralButtonText:t(D.cancelAction),actionButtonText:t(D.buyRobuxAction),onAction:a,loading:i,disableActionButton:!s,footerText:me().createElement(C,{expectedPrice:n})},{actionButtonShow:!0}))}return t.defaultProps={loading:!1},t.propTypes={translate:i().func.isRequired,expectedPrice:i().number.isRequired,currentPrice:i().number.isRequired,onAction:i().func.isRequired,loading:i().bool},[(0,s.withTranslations)(t,o.purchasingResources),e]}function U(e){e=e.name;return me().createElement("span",{className:"font-bold"},e)}U.propTypes={name:i().string.isRequired};var B=U;function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _=a.resources;function j(){var e=k((0,P.createModal)(),2),p=e[0],e=e[1];function t(e){var t,r=e.translate,n=e.title,a=e.expectedPrice,i=e.thumbnail,s=e.assetName,o=e.assetType,l=e.assetTypeDisplayName,c=e.sellerName,u=e.isPlace,d=e.onAction,m=e.loading,e=e.currentRobuxBalance,l={assetName:(0,w.renderToString)(me().createElement(B,{name:s})),assetType:l||o,seller:(0,pe.escapeHtml)()(c),robux:(0,w.renderToString)(me().createElement(E,{price:a}))},o=u?_.promptBuyAccessMessage:_.promptBuyMessage,c=0===a?(t=r(_.getItemHeading),r(_.getNowAction)):(t=r(_.buyItemHeading),r(_.buyNowAction));u&&(c=r(_.buyAccessAction));l=me().createElement("div",{className:"modal-message",dangerouslySetInnerHTML:{__html:r(o,l)}});return me().createElement(p,q({title:n||t,body:l,thumbnail:i,neutralButtonText:r(_.cancelAction),actionButtonText:c,onAction:d,footerText:me().createElement(C,{expectedPrice:a,currentRobuxBalance:e}),loading:m},{actionButtonShow:!0}))}return t.defaultProps={isPlace:!1,assetTypeDisplayName:"",title:"",loading:!1,currentRobuxBalance:void 0},t.propTypes={translate:i().func.isRequired,title:i().string,expectedPrice:i().number.isRequired,thumbnail:i().node.isRequired,assetName:i().string.isRequired,assetType:i().string.isRequired,assetTypeDisplayName:i().string,sellerName:i().string.isRequired,isPlace:i().bool,onAction:i().func.isRequired,loading:i().bool,currentRobuxBalance:i().number},[(0,s.withTranslations)(t,o.purchasingResources),e]}(Rt=Tt=Tt||{}).Bought="bought",Rt.Renewed="renewed";var H=Tt;function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var W=b.getAvatarPageUrl,z=a.resources;function ye(){var e=V((0,P.createModal)(),2),h=e[0],e=e[1];function t(e){var t,r,n=e.translate,a=e.expectedPrice,i=e.thumbnail,s=e.assetName,o=e.assetType,l=e.assetIsWearable,c=e.assetTypeDisplayName,u=e.sellerName,d=e.isPlace,m=e.isPrivateServer,p=e.onAccept,f=e.onDecline,b=e.transactionVerb,y=e.itemDelayed,g=e.currentRobuxBalance,e=n(z.continueAction);m?(t=n(z.configureAction),e=n(z.notNowAction)):y?(t=n(z.customizeAction),e=n(z.doneAction)):l&&(t=n(z.customizeAction),e=n(z.notNowAction),r=function(){return window.location.href=W(),!1});u={assetName:(0,w.renderToString)(me().createElement(B,{name:s})),assetType:c||o,seller:(0,pe.escapeHtml)()(u),robux:(0,w.renderToString)(me().createElement(E,{price:a}))},d=b===H.Bought?d?z.successfullyAcquiredAccessMessage:z.successfullyBoughtMessage:b===H.Renewed?d?z.successfullyRenewedAccessMessage:z.successfullyRenewedMessage:d?z.successfullyAcquiredAccessMessage:z.successfullyAcquiredMessage,u=me().createElement("div",{className:"modal-message",dangerouslySetInnerHTML:{__html:"".concat(n(d,u)," ").concat(y?n(z.itemGrantDelayMessage):"")}});return me().createElement(h,{title:n(z.purchaseCompleteHeading),body:u,thumbnail:i,neutralButtonText:e,actionButtonText:t,onAction:p||r,onNeutral:f,footerText:!m&&me().createElement(C,{expectedPrice:a,currentRobuxBalance:g}),actionButtonShow:!!t,disableActionButton:y,onClose:function(){return window.location.reload()}})}return t.defaultProps={isPlace:!1,assetTypeDisplayName:"",transactionVerb:"",assetIsWearable:!1,isPrivateServer:!1,onAccept:null,onDecline:null,itemDelayed:!1,currentRobuxBalance:void 0},t.propTypes={translate:i().func.isRequired,transactionVerb:i().string,expectedPrice:i().number.isRequired,thumbnail:i().node.isRequired,assetName:i().string.isRequired,assetType:i().string.isRequired,assetTypeDisplayName:i().string,assetIsWearable:i().bool,sellerName:i().string.isRequired,isPlace:i().bool,isPrivateServer:i().bool,onAccept:i().func,onDecline:i().func,itemDelayed:i().bool,currentRobuxBalance:i().number},[(0,s.withTranslations)(t,o.purchasingResources),e]}var X=b.getPurchaseItemUrl,$=b.getPurchaseCollectibleItemUrl,Q=b.getPurchaseCollectibleItemInstanceUrl,Y=b.postBulkPurchaseUrl,ge={purchaseCollectibleItem:function(e,t){e={url:$(e),retryable:!0,withCredentials:!0};return pe.httpService.post(e,t)},purchaseCollectibleItemInstance:function(e,t){e={url:Q(e),retryable:!0,withCredentials:!0};return pe.httpService.post(e,t)},purchaseItem:function(e,t){e={url:X(e),retryable:!0,withCredentials:!0};return pe.httpService.post(e,t)},bulkPurchaseItem:function(e,t,r,n){n={url:"".concat(Y(),"?idempotencyKey.key=").concat(n),retryable:!0,withCredentials:!0},r={purchasingUser:"users/".concat(e),context:{productSurface:t},fulfillmentGroups:[r]};return pe.httpService.post(n,r)}},J=b.getItemDetailsUrl,K=(b.postItemDetailsUrl,b.getPurchaseableDetailUrl),Z=b.getResellerDataUrl,ee=b.getMetaDataUrl,te=(b.getCollectibleItemDetailsUrl,b.getCurrentUserBalance),re=function(e,t){t={url:J(e,t),retryable:!0,withCredentials:!0};return pe.httpService.get(t)},ne=function(e){e={url:K(e),retryable:!0,withCredentials:!0};return pe.httpService.get(e)},ae=function(e){e={url:Z(e),retryable:!0,withCredentials:!0};return pe.httpService.get(e)},ie=function(){var e={url:ee(),retryable:!0,withCredentials:!0};return pe.httpService.get(e)},he=function(e){e={url:te(e),retryable:!0,withCredentials:!0};return pe.httpService.get(e)},se=function(e,s,o,l){return new(o=o||Promise)(function(r,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function a(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(n,a)}i((l=l.apply(e,s||[])).next())})},oe=function(r,n){var a,i,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,i=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(!(s=0<(s=o.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){o.label=t[1];break}if(6===t[0]&&o.label<s[1]){o.label=s[1],s=t;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(t);break}s[2]&&o.ops.pop(),o.trys.pop();continue}t=n.call(r,o)}catch(e){t=[6,e],i=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},le=b.getTwoStepVerificationConfig,ce=b.postGenerateTwoStepVerificationToken,ue=b.postRedeemTwoStepVerificationChallenge,ve=function(){return se(void 0,void 0,Promise,function(){var t;return oe(this,function(e){switch(e.label){case 0:t={url:ce("spend-friction"),retryable:!0,withCredentials:!0},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,pe.httpService.post(t)];case 2:return[2,e.sent().data||null];case 3:return e.sent(),[2,null];case 4:return[2]}})})},Se=function(n,a){return se(void 0,void 0,Promise,function(){var t,r;return oe(this,function(e){switch(e.label){case 0:t={url:ue("spend-friction"),retryable:!0,withCredentials:!0},r={challengeToken:n,verificationToken:a},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,pe.httpService.post(t,r)];case 2:return r=e.sent(),[2,null!==(r=r.data)&&void 0!==r&&r];case 3:return e.sent(),[2,!1];case 4:return[2]}})})},Pe=function(e,s,o,l){return new(o=o||Promise)(function(r,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function a(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(n,a)}i((l=l.apply(e,s||[])).next())})},Ie=function(r,n){var a,i,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,i=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(!(s=0<(s=o.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){o.label=t[1];break}if(6===t[0]&&o.label<s[1]){o.label=s[1],s=t;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(t);break}s[2]&&o.ops.pop(),o.trys.pop();continue}t=n.call(r,o)}catch(e){t=[6,e],i=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},we=fe.AccountIntegrityChallengeService.TwoStepVerification;function Ee(e){var t=e.systemFeedbackService,e=e.translate;t.warning(e("Response.VerificationError"))}function Ae(e){var s=e.stopTwoStepVerification,o=e.systemFeedbackService,r=e.totalAttempts,l=e.translate;return Pe(this,void 0,void 0,function(){var i,t=this;return Ie(this,function(e){switch(e.label){case 0:return[4,ve()];case 1:return(i=e.sent())?fe.AccountIntegrityChallengeService.TwoStepVerification.renderChallenge({containerId:"two-sv-popup-entry",userId:fe.CurrentUser.userId,challengeId:i,actionType:we.ActionType.RobuxSpend,renderInline:!1,shouldShowRememberDeviceCheckbox:!1,onChallengeCompleted:function(a){return Pe(t,void 0,void 0,function(){var n;return Ie(this,function(e){switch(e.label){case 0:return[4,Se(i,a.verificationToken)];case 1:return n=e.sent(),s(),n?(r=(t={systemFeedbackService:o,translate:l}).systemFeedbackService,t=t.translate,r.success(t("Response.SuccessfulVerificationV2"))):Ee({systemFeedbackService:o,translate:l}),[2]}var t,r})})},onChallengeInvalidated:function(){var e=r||0;e<3?Ae({stopTwoStepVerification:s,systemFeedbackService:o,translate:l,totalAttempts:e+1}):(Ee({systemFeedbackService:o,translate:l}),s())},onModalChallengeAbandoned:function(){}}):Ee({systemFeedbackService:o,translate:l}),[2]}})})}var Re=(0,s.withTranslations)(function(e){var t=this,r=e.translate,n=e.isTwoStepVerificationActive,a=e.stopTwoStepVerification,i=e.systemFeedbackService;return(0,de.useEffect)(function(){n&&Pe(t,void 0,void 0,function(){return Ie(this,function(e){switch(e.label){case 0:return[4,se(void 0,void 0,Promise,function(){var t;return oe(this,function(e){switch(e.label){case 0:t={url:le(fe.CurrentUser.userId),retryable:!0,withCredentials:!0},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,pe.httpService.get(t)];case 2:return t=e.sent(),[2,((null===(t=null==t?void 0:t.data)||void 0===t?void 0:t.methods)||[]).some(function(e){return!!e.enabled})];case 3:return e.sent(),[2,!1];case 4:return[2]}})})];case 1:return e.sent()?Ae({stopTwoStepVerification:a,systemFeedbackService:i,translate:r}):(t={titleText:(t=(t={translate:r}).translate)("Heading.TwoStepVerificationRequiredV3"),bodyContent:t("Message.TwoStepVerificationRequiredV4"),imageUrl:void 0,acceptText:t("Action.GoToSecurity"),acceptColor:"btn-primary-md",onAccept:function(){window.location.href=fe.Endpoints.getAbsoluteUrl("/my/account#!/security")},declineText:t("Action.Cancel"),dismissable:!0,allowHtmlContentInBody:!0,onOpenCallback:function(){}},fe.Dialog.open(t)),[2]}var t})})},[n]),me().createElement("div",{id:"two-sv-popup-entry"})},o.purchasingResources);function Te(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function xe(n){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Te(Object(a),!0).forEach(function(e){var t,r;t=n,e=a[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Te(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function Ce(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ne=a.resources,De=a.errorTypeIds,Oe=a.errorStatusText,Ue=a.events;function Be(){function z(){ue.itemDetail.buyButtonElementDataset&&(I.paymentFlowAnalyticsService.startRobuxUpsellFlow(ue.itemDetail.buyButtonElementDataset.assetType,!!ue.itemDetail.buyButtonElementDataset.userassetId,ue.itemDetail.buyButtonElementDataset.isPrivateServer,ue.itemDetail.buyButtonElementDataset.isPlace),t.open())}function X(){var e,t,r;if(fe.ItemPurchaseUpsellService&&null!==(e=ue)&&void 0!==e&&null!==(t=e.itemDetail)&&void 0!==t&&t.expectedItemPrice)if(0<=Y-(null===ue||void 0===ue||null===(r=ue.itemDetail)||void 0===r?void 0:r.expectedItemPrice))z();else try{fe.ItemPurchaseUpsellService.startItemUpsellProcess(ue.errorObject,ue.itemDetail,ue.startOriginalFlowCallback),window.EventTracker.fireEvent(Ue.NEW_UPSELL_FROM_REACT_BUY_BUTTON)}catch(e){window.EventTracker.fireEvent(Ue.NEW_UPSELL_FAILED_DUE_TO_ERROR),z()}else window.EventTracker.fireEvent(Ue.NEW_UPSELL_FAILED_DUE_TO_LOADING),z()}var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},$=e.customPurchaseVerificationModal,Q=e.customPurchaseVerificationModalService,Y=be().userRobuxBalance,e=Fe((0,P.createSystemFeedback)(),2),J=e[0],K=e[1],e=Fe((0,P.createSystemFeedback)(),2),Z=e[0],ee=e[1],e=Fe(j(),2),te=e[0],re=e[1],e=Fe(R(),2),ne=e[0],t=e[1],e=Fe(ye(),2),ae=e[0],ie=e[1],e=Fe(O(),2),se=e[0],oe=e[1],e=Fe(u(),2),le=e[0],ce=e[1],ue={errorObject:{},itemDetail:{},startOriginalFlowCallback:function(){return null}};function r(e){function l(){return k(!0)}var c=e.translate,i=e.assetName,s=e.assetType,o=e.assetTypeDisplayName,u=e.productId,d=e.expectedCurrency,t=e.expectedPrice,m=e.expectedSellerId,p=e.expectedPromoId,f=e.userAssetId,r=e.thumbnail,n=e.sellerName,b=e.sellerType,y=e.showSuccessBanner,g=e.isPlace,h=e.isPrivateServer,v=e.handlePurchase,S=e.onPurchaseSuccess,P=e.collectibleItemId,I=e.collectibleItemInstanceId,w=e.collectibleProductId,a=e.customProps,E=Fe((0,de.useState)(!1),2),A=E[0],R=E[1],T=Fe((0,de.useState)(null),2),x=T[0],C=T[1],F=Fe((0,de.useState)(null),2),M=F[0],N=F[1],D=Fe((0,de.useState)(t-Y),2),e=D[0],O=D[1],E=Fe((0,de.useState)(null),2),T=E[0],U=E[1],F=Fe((0,de.useState)(void 0),2),D=F[0],B=F[1],E=Fe((0,de.useState)(!1),2),q=E[0],k=E[1],F=Fe((0,de.useState)(!1),2),E=F[0],L=F[1];(0,de.useEffect)(function(){fe.CurrentUser.isAuthenticated&&void 0===be().userRobuxBalance&&he(fe.CurrentUser.userId).then(function(e){B(e.data.robux)}).catch(function(){B(void 0)})},[u,t,m]),(0,de.useEffect)(function(){q&&L(!0)},[q]);function _(){(Q||re).close(),oe.close()}function j(e,t){var r,n,a={assetType:s,assetTypeDisplayName:o,expectedCurrency:d,expectedPrice:t,expectedSellerId:m,itemName:i,itemType:s,productId:u,userassetId:f,placeproductpromotionId:p,isPrivateServer:h,isPlace:g};ue={errorObject:{shortfallPrice:e,currentCurrency:d,isPlace:g},itemDetail:{expectedItemPrice:t,assetName:i,buyButtonElementDataset:a},startOriginalFlowCallback:(r=e,n=a,function(){fe.ItemPurchaseUpsellService&&fe.ItemPurchaseUpsellService.showExceedLargestInsufficientRobuxModal?fe.ItemPurchaseUpsellService.showExceedLargestInsufficientRobuxModal(r,n,z):z()})}}function H(e){var t=e.showDivId,r=e.title,n=e.errorMsg,a=e.price,i=e.shortfallPrice,e=e.onDecline;t===De.transactionFailure?(C({title:r,message:n,onDecline:e}),ce.open()):t===De.insufficientFunds?(O(i),j(i,a),X()):t===De.priceChanged&&(N(a),oe.open())}function V(e){U(e),ie.open()}function G(e){P?W(e):(e={expectedCurrency:d,expectedPrice:e=e,expectedSellerId:m},0<p&&(e.expectedPromoId=p),0<f&&(e.userAssetId=f),v?v({params:e,handleError:H,setLoading:R,openConfirmation:V,closeAll:_}):(R(!0),ge.purchaseItem(u,e).then(function(e){var t=e.data;console.debug(t);var r=t.statusCode,n=t.assetIsWearable,e=t.transactionVerb;R(!1),_(),t.purchased||"TwoStepVerificationRequired"!==t.reason?500===r?H(t):(S(),y?K.success(c(Ne.purchaseCompleteHeading)):V({assetIsWearable:n,transactionVerb:e,onDecline:function(){window.location.reload()}})):l()}).catch(function(t){if(console.debug(t),R(!1),_(),t&&(null==t?void 0:t.statusText)!==Oe.badRequest){429===t.status&&H({title:c(Ne.errorOccuredHeading),errorMsg:c(Ne.floodcheckFailureMessage,{throttleTime:1}),showDivId:De.transactionFailure});try{H(JSON.parse(null==t?void 0:t.statusText))}catch(e){H({errorMsg:null==t?void 0:t.statusText})}}else H({title:c(Ne.errorOccuredHeading),errorMsg:c(Ne.purchasingUnavailableMessage),showDivId:De.transactionFailure})})))}var W=function(){var o,e=(o=regeneratorRuntime.mark(function e(r){var n,a,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n={collectibleItemId:P,expectedCurrency:d,expectedPrice:r,expectedPurchaserId:fe.CurrentUser.userId,expectedPurchaserType:"User",expectedSellerId:m,expectedSellerType:b,idempotencyKey:pe.uuidService.generateRandomUuid()},I&&(n.collectibleItemInstanceId=I),w&&(n.collectibleProductId=w),v)return v({params:n,handleError:H,setLoading:R,openConfirmation:V,closeAll:_}),t.abrupt("return");t.next=6;break;case 6:return R(!0),s=I?ge.purchaseCollectibleItemInstance:ge.purchaseCollectibleItem,t.prev=8,t.next=11,s(P,n);case 11:if(s=t.sent,a=s.data,i=a.transactionVerb,R(!1),_(),!("number"==typeof(s=null!==(s=a.statusCode)&&void 0!==s?s:a.status)&&400<=s||!1===(null==a?void 0:a.purchased))){t.next=21;break}!1===(null==a?void 0:a.purchased)&&"TwoStepVerificationRequired"===(null==a?void 0:a.reason)?l():!1===(null==a?void 0:a.purchased)&&"Flooded"===(null==a?void 0:a.purchaseResult)?H({title:c(Ne.errorOccuredHeading),errorMsg:c(Ne.floodcheckFailureMessage,{throttleTime:1}),showDivId:De.transactionFailure}):H({title:c(Ne.errorOccuredHeading),errorMsg:c(Ne.purchasingUnavailableMessage),showDivId:De.transactionFailure,onDecline:function(){window.location.reload()}}),t.next=26;break;case 21:if(S(),y)return K.success(c(Ne.purchaseCompleteHeading)),t.abrupt("return");t.next=25;break;case 25:V({assetIsWearable:!0,transactionVerb:i,itemDelayed:null==a?void 0:a.pending,onDecline:function(){window.location.reload()}});case 26:t.next=37;break;case 28:if(t.prev=28,t.t0=t.catch(8),console.debug(t.t0),fe.AccountIntegrityChallengeService.Generic.ChallengeError.matchAbandoned(x))return R(!1),t.abrupt("return");t.next=34;break;case 34:if(R(!1),_(),t.t0&&(null===t.t0||void 0===t.t0?void 0:t.t0.statusText)!==Oe.badRequest){429===t.t0.status&&H({title:c(Ne.errorOccuredHeading),errorMsg:c(Ne.floodcheckFailureMessage,{throttleTime:1}),showDivId:De.transactionFailure});try{H(JSON.parse(null===t.t0||void 0===t.t0?void 0:t.t0.statusText))}catch(e){H({errorMsg:null===t.t0||void 0===t.t0?void 0:t.t0.statusText})}}else H({title:c(Ne.errorOccuredHeading),errorMsg:c(Ne.purchasingUnavailableMessage),showDivId:De.transactionFailure});case 37:case"end":return t.stop()}},e,null,[[8,28]])}),function(){var e=this,s=arguments;return new Promise(function(t,r){var n=o.apply(e,s);function a(e){Ce(n,t,r,a,i,"next",e)}function i(e){Ce(n,t,r,a,i,"throw",e)}a(void 0)})});return function(){return e.apply(this,arguments)}}(),a=$?me().createElement($,xe({},xe({assetName:i,assetType:s,expectedPrice:t,thumbnail:r,sellerName:n,loading:A,onAction:function(){return G(t)}},a))):me().createElement(te,{expectedPrice:t,thumbnail:r,assetName:i,assetType:s,assetTypeDisplayName:o,sellerName:n,isPlace:g,loading:A,collectibleItemId:P,collectibleItemInstanceId:I,currentRobuxBalance:D,onAction:function(){return G(t),!1}});return 0<e&&fe.ItemPurchaseUpsellService&&j(e,null!=M?M:t),me().createElement(me().Fragment,null,me().createElement(Re,{isTwoStepVerificationActive:q,stopTwoStepVerification:function(){return k(!1)},systemFeedbackService:ee}),0<e?me().createElement(ne,{robuxNeeded:e}):a,x&&me().createElement(le,{title:x.title,message:x.message,onDecline:x.onDecline}),null!=M&&me().createElement(se,{expectedPrice:t,currentPrice:M,loading:A,onAction:function(){return G(M),!1}}),T&&me().createElement(ae,xe({thumbnail:r,assetName:i,assetType:s,assetTypeDisplayName:o,sellerName:n,isPlace:g,isPrivateServer:h,expectedPrice:M||t,currentRobuxBalance:D},T)),y&&me().createElement(J,null),E&&me().createElement(Z,null))}return r.defaultProps={isPlace:!1,isPrivateServer:!1,productId:null,assetTypeDisplayName:"",expectedPromoId:0,userAssetId:0,showSuccessBanner:!1,handlePurchase:null,onPurchaseSuccess:function(){return null},customProps:{},collectibleItemId:null,collectibleItemInstanceId:null,collectibleProductId:null,sellerType:null},r.propTypes={translate:i().func.isRequired,productId:function(e,t,r){var n=e.collectibleItemId,a=e.productId;return n||"number"==typeof a?null:new Error("Invalid prop ".concat(t," supplied to ").concat(r,". Validation failed."))},expectedCurrency:i().number.isRequired,expectedPrice:i().number.isRequired,thumbnail:i().node.isRequired,assetName:i().string.isRequired,assetType:i().string.isRequired,assetTypeDisplayName:i().string,expectedSellerId:i().number.isRequired,sellerName:i().string.isRequired,sellerType:i().string,isPlace:i().bool,isPrivateServer:i().bool,expectedPromoId:i().number,userAssetId:i().number,showSuccessBanner:i().bool,handlePurchase:i().func,onPurchaseSuccess:i().func,customProps:i().func,collectibleItemId:i().string,collectibleItemInstanceId:i().string,collectibleProductId:i().string},[(0,s.withTranslations)(r,o.purchasingResources),{start:function(){(Q||re).open(),X()}}]}var qe=HeaderScripts;function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _e=a.errorMessages,je=function(e,t,r){function n(){s({loading:!1,loadFailure:!0})}var a=ke((0,de.useState)({expectedSellerId:0,owned:!1,isPurchasable:!1,id:0,itemType:"",assetType:"",name:"",description:"",productId:0,creatorTargetId:0,creatorName:"",price:null,loading:!0,loadFailure:!1,premiumPricing:null,premiumDiscountPercentage:null,hasLimitedPrivateSales:!1,isPublicDomain:!1,premiumPriceInRobux:null,assetTypeDisplayName:"",offSaleDeadline:null,unitsAvailableForConsumption:0,isLimited:!1,resellerAvailable:!1,firstReseller:{},priceStatus:"",isMarketPlaceEnabled:!0}),2),i=a[0],s=a[1],o=(0,de.useCallback)(function(){e(t,r).then(function(e){var e=e.data,t={expectedSellerId:e.expectedSellerId,owned:e.owned,id:e.id,itemType:e.itemType,assetType:e.assetType,name:e.name,description:e.description,productId:e.productId,price:e.price,lowestPrice:e.lowestPrice,creatorTargetId:e.creatorTargetId,creatorName:e.creatorName,hasLimitedPrivateSales:void 0!==e.lowestPrice,isPublicDomain:0===e.price,offSaleDeadline:e.offSaleDeadline,isLimited:e.itemRestrictions.includes("Limited")||e.itemRestrictions.includes("LimitedUnique"),unitsAvailableForConsumption:void 0!==e.unitsAvailableForConsumption?e.unitsAvailableForConsumption:0,priceStatus:void 0!==e.priceStatus?e.priceStatus:"",itemRestrictions:e.itemRestrictions};void 0!==e.premiumPricing&&(t.premiumPriceInRobux=e.premiumPricing.premiumPriceInRobux,t.premiumDiscountPercentage=e.premiumPricing.premiumDiscountPercentage),t.isLimited&&(t.price=void 0!==t.lowestPrice?t.lowestPrice:t.price,ae(t.id).then(function(e){t.resellerAvailable=0<e.data.data.length,t.resellerAvailable&&(e=ke(e.data.data,1)[0],t.price=e.price,t.firstReseller=e)})),ne(e.productId).then(function(e){!e.data.purchasable&&e.data.reason&&e.data.reason!==_e.insufficientFunds?t.isPurchasable=e.data.purchasable:t.isPurchasable=!0,t.assetTypeDisplayName=e.data.assetTypeDisplayName,t.loading=!1,t.loadFailure=!1,ie().then(function(e){t.isMarketPlaceEnabled=e.data.isMarketPlaceEnabled&&e.data.isItemsXchangeEnabled,s(t)}).catch(function(){n()})}).catch(function(e){e.statusText===_e.unauthorizedMessage?(t.loading=!1,t.loadFailure=!1,s(t)):n()})}).catch(function(){n()})},[t,r,e]);return(0,de.useEffect)(function(){o()},[]),{itemDetail:i,loadItemDetail:o}},He=function(){var e=document.getElementById("item-container");return e?{itemDetailItemId:parseInt(e.getAttribute("data-item-id"),10),itemDetailItemType:e.getAttribute("data-item-type")}:null},Ve=RobloxThumbnails;function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var We=Be(),ze=(xt=(xt=2,function(e){if(Array.isArray(e))return e}(We=We)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(We,xt)||function(e,t){if(!e)return;if("string"==typeof e)return Ge(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ge(e,t)}(We,xt)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))[0],Xe=xt[1],$e=a.resources,Qe=b.getPremiumConversionUrl;function Ye(e){var t=e.translate,r=e.productId,n=e.price,a=e.itemName,i=e.itemType,s=e.assetTypeDisplayName,o=e.sellerName,l=e.expectedSellerId,c=e.isPurchasable,u=e.isOwned,d=e.isPlugin,m=e.itemDetailItemId,p=e.loading,f=e.userQualifiesForPremiumPrices,b=e.premiumPriceInRobux,y=e.isAuthenticated,g=e.resellerAvailable,h=e.firstReseller,g=e.isMarketPlaceEnabled&&(g||c),c=function(){return t(0===n?$e.getAction:$e.buyAction)};if(p)return me().createElement(P.Loading,null);if(!y)return null!=b?me().createElement(P.Button,{id:"upgrade-button",className:"btn-fixed-width-lg btn-primary-lg",onClick:function(){I.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(I.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_PREMIUM_PURCHASE,!1,I.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PREMIUM_UPSELL,I.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,I.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.GET_PREMIUM),window.open(Qe(m,i))}},t($e.getPremiumAction)):me().createElement(P.Button,{className:"btn-fixed-width-lg btn-growth-lg PurchaseButton",onClick:function(){window.location="/login"}},c());y=me().createElement(Ve.Thumbnail2d,{type:"bundle"===i?Ve.ThumbnailTypes.bundleThumbnail:Ve.ThumbnailTypes.assetThumbnail,size:Ve.DefaultThumbnailSize,targetId:m,format:Ve.ThumbnailFormat.webp,altName:a});return d&&(u||0===n)?me().createElement(me().Fragment,null,me().createElement(P.Button,{className:"btn-fixed-width-lg btn-primary-lg InstallButton",onClick:function(){var e;e=m,fe.GameLauncher.openPluginInStudio(e)}},me().createElement("span",null,t($e.installAction)))):me().createElement(me().Fragment,null,me().createElement(P.Button,{className:"btn-fixed-width-lg btn-growth-lg PurchaseButton",onClick:Xe.start,isDisabled:!g},c()),me().createElement(ze,{productId:r,expectedPrice:f&&null!=b?b:n,thumbnail:y,assetTypeDisplayName:s,assetName:a,sellerName:h?h.seller.name:o,expectedSellerId:h?h.seller.id:l,userAssetId:h?h.userAssetId:0,showSuccessBanner:!0}))}Ye.propTypes={translate:i().func.isRequired,productId:i().number.isRequired,price:i().number.isRequired,itemName:i().string.isRequired,itemType:i().string.isRequired,assetTypeDisplayName:i().string.isRequired,sellerName:i().string.isRequired,expectedSellerId:i().number.isRequired,isPurchasable:i().bool.isRequired,isOwned:i().bool.isRequired,isPlugin:i().bool.isRequired,itemDetailItemId:i().number.isRequired,loading:i().bool.isRequired,userQualifiesForPremiumPrices:i().bool.isRequired,premiumPriceInRobux:i().number.isRequired,isAuthenticated:i().bool.isRequired,resellerAvailable:i().bool.isRequired,firstReseller:i().shape({seller:{name:i().string.isRequired,id:i().number.isRequired},userAssetId:i().number.isRequired}).isRequired,isMarketPlaceEnabled:i().bool.isRequired};var Je=(0,s.withTranslations)(Ye,o.itemResources),Ke=a.resources;function Ze(e){var t=e.translate,r=e.isLimited,e=e.resellerAvailable,e=r&&e;return me().createElement("div",{className:"text-label field-label price-label"},me().createElement("span",null,t(e?Ke.bestPriceLabel:Ke.priceLabel)))}Ze.propTypes={translate:i().func.isRequired,isLimited:i().bool.isRequired,resellerAvailable:i().bool.isRequired};var et=(0,s.withTranslations)(Ze,o.itemResources),tt=a.resources,rt=a.errorMessages,nt=b.getPremiumConversionUrl;function at(e){function t(e){I.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(I.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_PREMIUM_PURCHASE,!1,I.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PREMIUM_UPSELL,I.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,e.target.innerText)}var r=e.translate,n=e.price,a=e.itemType,i=e.itemDetailItemId,s=e.premiumPriceInRobux,o=e.premiumDiscountPercentage,l=e.userQualifiesForPremiumPrices,c=e.isOwned,u=e.loading,d=e.loadFailure,m=e.unitsAvailableForConsumption,p=e.isLimited,f=e.isPlugin,b=e.resellerAvailable,y=e.priceStatus,g=e.offSaleDeadline,h=e.isMarketPlaceEnabled,v=null==s&&null==n,S=!0,e="";return u?me().createElement(P.Loading,null):(!u&&d?e=rt.retryErrorMessage:y===tt.offSale&&null===g?e=r(tt.itemNoLongerForSaleLabel):h||c?f||!c||p?p&&0===m&&!b?e=r(tt.noOneCurrentlySellingLabel):S=!1:e=r(tt.itemAvailableInventoryLabel):e=r(tt.purchasingTemporarilyUnavailableLabel),0===n?null:S&&!c?me().createElement("div",{className:"price-container-text"},me().createElement("div",{className:"item-first-line"}," ",e," ")):me().createElement(me().Fragment,null,me().createElement("div",{className:"price-container-text"},S?me().createElement("div",{className:"item-first-line"}," ",e," "):null,me().createElement(et,{translate:r,isLimited:p,resellerAvailable:b}),me().createElement("div",{className:"price-info"},me().createElement("div",{className:"icon-text-wrapper clearfix icon-robux-price-container"},v?me().createElement("span",{className:"icon-robux-16x16 icon-robux-gray-16x16 wait-for-i18n-format-render"}):me().createElement("span",{className:"icon-robux-16x16 wait-for-i18n-format-render"}),me().createElement("span",{className:"text-robux-lg wait-for-i18n-format-render"},l&&null!=s?pe.numberFormat.getNumberFormat(s):pe.numberFormat.getNumberFormat(n)))),function(){if(null==s||c)return null;if(null==n)return l?me().createElement("span",{className:"small text field-content empty-label wait-for-i18n-format-render"},r(tt.premiumExclusiveEligiblePromptLabel)):me().createElement("span",{className:"small text field-content empty-label wait-for-i18n-format-render"},r(tt.premiumExclusiveIneligiblePromptLabel));var e={originalPrice:(0,w.renderToString)(me().createElement(E,{price:n})),discountPercentage:o,premiumDiscountedPrice:(0,w.renderToString)(me().createElement(E,{price:s}))};return me().createElement(me().Fragment,null,me().createElement("div",{className:"text-label field-label empty-label"},""),me().createElement("span",{className:"premium-prompt small text field-content empty-label wait-for-i18n-format-render"},l?me().createElement("a",{"aria-label":" ",href:nt(i,a),dangerouslySetInnerHTML:{__html:r(tt.premiumDiscountSavingsLabel,e)},onClick:function(e){t(e),window.open(nt(i,a))}}):me().createElement("a",{"aria-label":" ",href:nt(i,a),dangerouslySetInnerHTML:{__html:r(tt.premiumDiscountOpportunityPromptLabel,e)},onClick:function(e){t(e),window.open(nt(i,a))}})))}())))}at.propTypes={translate:i().func.isRequired,price:i().number.isRequired,itemType:i().string.isRequired,itemDetailItemId:i().number.isRequired,premiumPriceInRobux:i().number.isRequired,premiumDiscountPercentage:i().number.isRequired,userQualifiesForPremiumPrices:i().bool.isRequired,loading:i().bool.isRequired,isOwned:i().bool.isRequired,loadFailure:i().bool.isRequired,unitsAvailableForConsumption:i().number.isRequired,isLimited:i().bool.isRequired,isPlugin:i().bool.isRequired,resellerAvailable:i().bool.isRequired,priceStatus:i().string.isRequired,offSaleDeadline:i().string.isRequired,isMarketPlaceEnabled:i().bool.isRequired};var it=(0,s.withTranslations)(at,o.itemModelResources);function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ot(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ot(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lt=a.resources;function ct(e){var t=e.translate,r=e.offSaleDeadline,e=st((0,de.useState)(0),2),n=e[0],a=e[1],e=st((0,de.useState)(0),2),i=e[0],s=e[1],e=st((0,de.useState)(0),2),o=e[0],l=e[1],e=st((0,de.useState)(0),2),c=e[0],u=e[1];(0,de.useEffect)(function(){function e(){var e;new Date<new Date(r)&&(e=+new Date,e=(new Date(r).getTime()-e)/1e3,a(Math.floor(e/86400)),s(Math.floor(e/3600%24)),l(Math.floor(e/60%60)),u(Math.floor(e%60)))}var t;return e(),t=setInterval(e,1e3),function(){return clearInterval(t)}},[a,s,l,u]);return me().createElement("div",{id:"sale-clock",className:"text-error sale-clock desktop-sale-clock"},function(){if(n<1){var e={numberOfHours:i,numberOfMinutes:o,numberOfSeconds:c};return me().createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:t(lt.OffsaleCountdownHourMinuteSecondLabel,e)}})}if(c<1)return window.location.reload(),null;e={numberOfDays:n,numberOfHours:i,numberOfMinutes:o};return me().createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:t(lt.CountdownTimerDayHourMinute,e)}})}())}ct.propTypes={translate:i().func.isRequired,offSaleDeadline:i().string.isRequired};var ut=(0,s.withTranslations)(ct,o.itemResources),dt=a.resources,mt=a.assetTypes,pt=a.assetCategory,ft=b.getInventoryUrl;function bt(e){var t=e.translate,r=e.assetType,n=qe.deviceMeta.getDeviceMeta(),a="phone"===n.deviceType,e=ft(qe.authenticatedUser.id),i=r===mt.Plugin||r===mt.Decal||r===mt.Model||r===mt.Video||r===mt.Animation?pt.Library:r===mt.Place||r===mt.Badge||r===mt.GamePass||r===mt.Animation?null:pt.Catalog;return i!==pt.Catalog||n.isInApp||!qe.deviceMeta.isAndroidApp&&!qe.deviceMeta.isIosApp||!qe.deviceMeta.isPhone&&!qe.deviceMeta.isTablet?i!==pt.Catalog||a?me().createElement("a",{id:"inventory-button",href:e,className:"btn-fixed-width-lg btn-control-md"},t(dt.inventoryAction)):me().createElement("a",{id:"edit-avatar-button",href:"/my/avatar",className:"btn-control-md"},me().createElement("span",{className:"icon-nav-charactercustomizer"})):me().createElement("a",{id:"open-in-avatar-editor-button",href:"/#",className:"btn-fixed-width-lg btn-control-md"},me().createElement("span",{className:"icon-nav-charactercustomizer"}))}bt.propTypes={translate:i().func.isRequired,assetType:i().number.isRequired};var yt=(0,s.withTranslations)(bt,o.itemResources),gt=He,ht=a.assetTypes;function vt(e){var t=e.translate,e=gt(),r=e.itemDetailItemId,e=e.itemDetailItemType,n=je(re,r,e).itemDetail;return me().createElement(me().Fragment,null,me().createElement(it,{translate:t,price:n.price,itemType:n.itemType,itemDetailItemId:r,premiumPriceInRobux:n.premiumPriceInRobux,premiumDiscountPercentage:n.premiumDiscountPercentage,userQualifiesForPremiumPrices:qe.authenticatedUser.isPremiumUser,isOwned:n.owned,loading:n.loading,loadFailure:n.loadFailure,unitsAvailableForConsumption:n.unitsAvailableForConsumption,isLimited:n.isLimited,isPlugin:n.assetType===ht.Plugin,resellerAvailable:n.resellerAvailable,priceStatus:n.priceStatus,offSaleDeadline:n.offSaleDeadline,isMarketPlaceEnabled:n.isMarketPlaceEnabled}),!n.loadFailure&&(n.owned&&(!n.isLimited||0<n.unitsAvailableForConsumption)?me().createElement("div",{className:"action-button"},me().createElement(yt,{translate:t,assetType:n.assetType})):me().createElement("div",{className:"action-button"},me().createElement(Je,{translate:t,productId:n.productId,price:n.price,itemType:n.itemType,assetTypeDisplayName:n.assetTypeDisplayName,itemName:n.name,sellerName:n.creatorName,expectedSellerId:n.expectedSellerId,isPurchasable:n.isPurchasable,isOwned:n.owned,isInstallable:n.assetType===ht.Plugin,itemDetailItemId:r,loading:n.loading,hasLimitedPrivateSales:n.hasLimitedPrivateSales,userQualifiesForPremiumPrices:qe.authenticatedUser.isPremiumUser,premiumPriceInRobux:n.premiumPriceInRobux,isAuthenticated:qe.authenticatedUser.isAuthenticated,unitsAvailableForConsumption:n.unitsAvailableForConsumption,isLimited:n.isLimited,resellerAvailable:n.resellerAvailable,firstReseller:n.firstReseller,isMarketPlaceEnabled:n.isMarketPlaceEnabled}),null!==n.offSaleDeadline&&me().createElement(ut,{translate:t,offSaleDeadline:n.offSaleDeadline}))))}vt.propTypes={translate:i().func.isRequired};var St=vt;function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return It(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return It(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Et(n){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(a),!0).forEach(function(e){var t,r;t=n,e=a[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):wt(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}var At,e=function(e,t){e=Et(Et({},e),{},{expectedSellerId:t.expectedSellerId,owned:t.owned,id:t.id,itemType:t.itemType,assetType:t.assetType,name:t.name,description:t.description,productId:t.productId,price:t.price,lowestPrice:t.lowestPrice,creatorTargetId:t.creatorTargetId,creatorName:t.creatorName,hasLimitedPrivateSales:void 0!==t.lowestPrice,isPublicDomain:0===t.price,offSaleDeadline:t.offSaleDeadline,isLimited:t.itemRestrictions.includes("Limited")||t.itemRestrictions.includes("LimitedUnique"),collectibleItemId:t.collectibleItemId,collectibleItemDetails:t.collectibleItemDetails,unitsAvailableForConsumption:void 0!==t.unitsAvailableForConsumption?t.unitsAvailableForConsumption:0,priceStatus:null!==(e=t.priceStatus)&&void 0!==e?e:t.priceStatus,itemRestrictions:t.itemRestrictions});return void 0!==t.premiumPricing&&(e.premiumPriceInRobux=t.premiumPricing.premiumPriceInRobux,e.premiumDiscountPercentage=t.premiumPricing.premiumDiscountPercentage),e.isLimited&&(e.price=void 0!==e.lowestPrice?e.lowestPrice:e.price),void 0!==e.collectibleItemId&&(e.resellerAvailable=t.hasResellers,e.isPurchasable=void 0!==t.lowestPrice,e.isMarketPlaceEnabled="ShopAndAllExperiences"===t.saleLocationType),e},Rt=function(e,t){e=Et({},e);return e.resellerAvailable=0<t.data.data.length,e.resellerAvailable&&(t=Pt(t.data.data,1)[0],e.price=t.price,e.firstReseller=t),e},Tt=function(e,t,r){var n=a.errorMessages,e=Et({},e);return!t.purchasable&&t.reason&&t.reason!==n.insufficientFunds&&t.reason!==n.twoStepVerificationRequired?e.isPurchasable=t.purchasable:(!t.purchasable&&t.reason&&t.reason===n.twoStepVerificationRequired&&(e.twoStepVerificationRequired=!0),e.isPurchasable=!0),e.assetTypeDisplayName=t.assetTypeDisplayName,e.loading=!1,e.loadFailure=!1,e.isMarketPlaceEnabled=r.data.isMarketPlaceEnabled&&r.data.isItemsXchangeEnabled,e},xt=function(e){e=Et({},e);return e.isPurchasable=!1,e};(He=At=At||{}).Asset="asset",He.Bundle="bundle";var Ct=At;function Ft(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}function Mt(o){return function(){var e=this,s=arguments;return new Promise(function(t,r){var n=o.apply(e,s);function a(e){Ft(n,t,r,a,i,"next",e)}function i(e){Ft(n,t,r,a,i,"throw",e)}a(void 0)})}}function Nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ot=a.maxBatchLoadRetries,Ut=e,Bt=Rt,qt=Tt,kt=xt,Lt=function(i){var a=(r=Nt((0,de.useState)(),2))[0],t=r[1],e=Nt((0,de.useState)([]),2),r=e[0],s=e[1],o=(e=Nt((0,de.useState)({}),2))[0],l=e[1],n=0,c=function(){n<Ot?(b(),n+=1):s([{loading:!1,loadFailure:!0}])},u=(0,de.useCallback)(function(){qe.authenticatedUser.isAuthenticated?ie().then(function(e){t(e)}).catch(function(){c()}):t({data:{isMarketplaceEnabled:!1,isItemsXchangeEnabled:!1}})},[]);function d(e){return m.apply(this,arguments)}function m(){return(m=Mt(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.inCache)return e.abrupt("return",o[t.itemType.toLowerCase()][t.id]);e.next=2;break;case 2:if((r=Ut({},t)).isLimited)return e.prev=4,e.next=7,ae(r.id);e.next=14;break;case 7:n=e.sent,r=Bt(r,n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),r.resellerAvailable=!1;case 14:if(void 0===t.productId){e.next=24;break}if(!qe.authenticatedUser.isAuthenticated){e.next=23;break}if(void 0===r.collectibleItemId)return e.next=19,ne(t.productId);e.next=21;break;case 19:n=e.sent,r=qt(r,n.data,a);case 21:e.next=24;break;case 23:r=kt(r);case 24:return e.abrupt("return",r);case 25:case"end":return e.stop()}},e,null,[[4,11]])}))).apply(this,arguments)}function p(){return(p=Mt(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(t.map(function(e){return d(e)}));case 3:r=e.sent,s(r),n=o,r.forEach(function(e){e.isLimited||o[e.itemType.toLowerCase()][e.id]||(n[e.itemType.toLowerCase()][e.id]=e)}),l(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),c();case 13:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function f(){return(f=Mt(regeneratorRuntime.mark(function e(){var t,r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],i.forEach(function(e){void 0===o[e.itemType.toLowerCase()][e.id]&&t.push(e)}),0<t.length)return n=[],t.map(function(e){return n.push({itemType:e.itemType,id:e.id})}),e.next=7,fe.ItemDetailsHydrationService.getItemDetails(n);e.next=8;break;case 7:r=e.sent;case 8:return a=[],i.forEach(function(t){var e;void 0===o[t.itemType.toLowerCase()][t.id]?(e=r.find(function(e){return e.id===t.id&&e.itemType.toLowerCase()===t.itemType.toLowerCase()}))&&a.push(e):a.push({id:t.id,itemType:t.itemType,inCache:!0})}),e.abrupt("return",a);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}var b=(0,de.useCallback)(function(){(function(){return f.apply(this,arguments)})().then(function(e){try{!function(){p.apply(this,arguments)}(e)}catch(e){c()}}).catch(function(){c()})},[a,i,d]);return(0,de.useEffect)(function(){var e={};e[Ct.Asset]={},e[Ct.Bundle]={},l(e),u()},[]),(0,de.useEffect)(function(){void 0!==a&&b()},[a,i]),{itemDetails:r,batchLoadItemDetails:b}};(xt=er=er||{}).Success="Success",xt.AlreadyOwned="ALREADY_OWNED",xt.InsufficientFunds="INSUFFICIENT_ROBUX",xt.ExceptionOccured="INTERNAL",xt.TooManyPurchases="QUOTA_EXCEEDED",xt.CaughtError="CaughtError",xt.PremiumNeeded="INSUFFICIENT_MEMBERSHIP",xt.NoSellers="NOT_FOR_SALE",xt.TwoStepVerificationRequired="TwoStepVerificationRequired",xt.InExperienceOnly="PURCHASE_PLACE_INVALID";var _t=er;function jt(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}function Ht(o){return function(){var e=this,s=arguments;return new Promise(function(t,r){var n=o.apply(e,s);function a(e){jt(n,t,r,a,i,"next",e)}function i(e){jt(n,t,r,a,i,"throw",e)}a(void 0)})}}function Vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Wt=a.resources,zt=a.batchBuyMaxThumbnails,Xt=a.floodcheckTime;function $t(e){var t=e.itemsCount,r=e.item,n=e.index,a=r.name,e=t-zt,n=zt<t&&n===zt-1;return me().createElement("div",{className:"modal-multi-item-image-container"},me().createElement(Ve.Thumbnail2d,{type:r.itemType.toLowerCase()===Ct.Bundle?Ve.ThumbnailTypes.bundleThumbnail:Ve.ThumbnailTypes.assetThumbnail,size:Ve.DefaultThumbnailSize,targetId:r.id,containerClass:"batch-buy-thumbnail",format:Ve.ThumbnailFormat.webp,altName:a}),n&&me().createElement("div",{className:"thumb-overlay"},me().createElement("div",{className:"font-header-1"},"",e)))}function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Jt,Kt=(xt=Qt(R(),2))[0],Zt=xt[1],er=Qt((Jt=(Tt=Vt((0,P.createModal)(),2))[0],Tt=Tt[1],nr.defaultProps={title:"",loading:!1},nr.propTypes={translate:i().func.isRequired,title:i().string,expectedTotalPrice:i().number.isRequired,currentRobuxBalance:i().number.isRequired,itemDetails:i().arrayOf(i().shape({productId:i().number.isRequired,price:i().number.isRequired,itemName:i().string.isRequired,itemType:i().string.isRequired,assetTypeDisplayName:i().string.isRequired,sellerName:i().string.isRequired,expectedSellerId:i().number.isRequired,isPurchasable:i().bool.isRequired,isOwned:i().bool.isRequired,isPlugin:i().bool.isRequired,itemDetailItemId:i().number.isRequired,loading:i().bool.isRequired,userQualifiesForPremiumPrices:i().bool.isRequired,premiumPriceInRobux:i().number.isRequired,isAuthenticated:i().bool.isRequired,resellerAvailable:i().bool.isRequired,firstReseller:i().shape({seller:{name:i().string.isRequired,id:i().number.isRequired},userAssetId:i().number.isRequired}).isRequired,isMarketPlaceEnabled:i().bool.isRequired})).isRequired,onCancel:i().func.isRequired,onTransactionComplete:i().func.isRequired,onAction:i().func.isRequired,loading:i().bool,productSurface:i().string.isRequired,systemFeedbackService:i().func.isRequired},[(0,s.withTranslations)(nr,o.purchasingResources),Tt]),2),tr=er[0],rr=er[1];function nr(e){var t,r=e.translate,n=e.title,a=e.expectedTotalPrice,o=e.itemDetails,i=e.currentRobuxBalance,s=e.onCancel,l=e.onTransactionComplete,c=e.onAction,u=e.loading,d=e.productSurface,m=e.systemFeedbackService,p=Vt((0,de.useState)(!1),2),f=p[0],b=p[1],y=function(){m.loading(r("Message.TwoStepVerificationBatchPurchase")),b(!0)},g=Vt((0,de.useState)(!1),2),h=g[0],v=g[1],S={itemCount:o.length,robux:(0,w.renderToString)(me().createElement("span",{className:"robux-price"},me().createElement(E,{price:a})))},e=Wt.batchBuyPromptMessage,p=0===a?(t=r(Wt.getItemHeading),r(Wt.getNowAction)):(t=r(Wt.buyItemHeading),r(Wt.buyNowAction)),g=null==o?void 0:o.slice(0,zt);function P(e){var t=function(e,t){var r=0,n=[];if(200===e.status){if(e.data.fulfillmentGroups[0].lineItems.forEach(function(t){var e;"SUCCEEDED"===t.status?r+=1:(e=n.find(function(e){return e.error===t.errorReason}))?e.count+=1:n.push({error:t.errorReason,count:1})}),r===e.data.fulfillmentGroups[0].lineItems.length)return{success:!0,message:Wt.purchaseCompleteHeading};var a={error:"",count:0};if(n.forEach(function(e){e.count>a.count&&(a=e)}),0<r)switch(a.error){case _t.AlreadyOwned:return{success:!1,message:Wt.batchBuyPartialSuccessItemsOwnedFailureMessage,params:{itemCountSuccess:r,itemCountFailure:a.count}};case _t.InsufficientFunds:return{success:!1,message:Wt.batchBuyPartialSuccessInsufficientFundsFailureMessage,params:{itemCountSuccess:r,itemCountFailure:a.count}};case _t.ExceptionOccured:return{success:!1,message:Wt.batchBuyPartialSuccessNetworkErrorFailureMessage,params:{itemCountSuccess:r,itemCountFailure:a.count}};case _t.TooManyPurchases:return{success:!1,message:Wt.batchBuyPartialSuccessFloodcheckFailureMessage,params:{itemCountSuccess:r,itemCountFailure:a.count}};case _t.PremiumNeeded:return{success:!1,message:Wt.batchBuyPartialSuccessPremiumNeededFailureMessage,params:{itemCountSuccess:r,itemCountFailure:a.count}};case _t.NoSellers:return{success:!1,message:Wt.batchBuyPartialSuccessNoSellersFailureMessage,params:{itemCountSuccess:r,itemCountFailure:a.count}};case _t.InExperienceOnly:return{success:!1,message:Wt.batchBuyPartialSuccessInExperienceOnlyFailureMessage,params:{itemCountSuccess:r,itemCountFailure:a.count}};default:return{success:!1,message:Wt.batchBuyPartialSuccessGeneralFailureMessage,params:{itemCountSuccess:r,itemCountFailure:a.count}}}else switch(a.error){case _t.AlreadyOwned:return{success:!1,message:Wt.batchBuyItemsOwnedFailureMessage};case _t.InsufficientFunds:return{success:!1,message:Wt.insufficientFundsFailureMessage};case _t.ExceptionOccured:return{success:!1,message:Wt.networkErrroFailureMessage};case _t.TooManyPurchases:return{success:!1,message:Wt.floodcheckFailureMessage,params:{throttleTime:Xt}};case _t.PremiumNeeded:return{success:!1,message:Wt.premiumNeededFailureMessage};case _t.NoSellers:return{success:!1,message:Wt.noSellersFailureMessage};case _t.InExperienceOnly:return{success:!1,message:Wt.inExperienceOnlyFailureMessage};default:return{success:!1,message:Wt.purchaseErrorFailureMessage}}}else if(403===e.status&&e.data.message.includes("2sv"))t();else if(400===e.status&&e.data.message.includes("InsufficientTotalBalance"))return{success:!1,message:Wt.insufficientFundsFailureMessage};return{success:!1,message:Wt.purchaseErrorFailureMessage}}(e,y),e=t.params?r(t.message,t.params):r(t.message);t.success?m.success(e):m.warning(e)}function I(){return(I=Ht(regeneratorRuntime.mark(function e(){var t,r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={strategy:"BEST_EFFORT",lineItems:[]},r=[],n=[],o.forEach(function(e){var t={};void 0!==e.collectibleItemId?(!("ExperiencesDevApiOnly"!==e.collectibleItemDetails.saleLocationType&&(!e.itemRestrictions.includes("Collectible")||0<e.collectibleItemDetails.unitsAvailableForConsumption&&(!e.collectibleItemDetails.hasResellers||e.collectibleItemDetails.price<e.collectibleItemDetails.lowestResalePrice)))&&e.collectibleItemDetails.lowestAvailableResaleProductId?t.collectibleProductId=e.collectibleItemDetails.lowestAvailableResaleProductId:t.collectibleProductId=e.collectibleItemDetails.collectibleProductId,t.agreedPriceRobux=e.collectibleItemDetails.lowestPrice):void 0!==e.firstReseller?(t.limitedV1InstanceId="".concat(e.firstReseller.userAssetId),t.agreedPriceRobux=e.firstReseller.price):(t.virtualEconomyProductId="".concat(e.productId),t.agreedPriceRobux=e.premiumPriceInRobux&&qe.authenticatedUser.isPremiumUser?e.premiumPriceInRobux:e.price),r.push(t);t={data:{itemData:{},reason:""}};"Asset"===e.itemType?t.data.itemData.assetId=e.id:t.data.itemData.bundleId=e.id,n.push(t)}),t.lineItems=r,e.prev=5,e.next=8,ge.bulkPurchaseItem(fe.CurrentUser.userId,d,t,pe.uuidService.generateRandomUuid());case 8:a=e.sent,i=0,a.data.fulfillmentGroups[0].lineItems.forEach(function(e){n[i].data.reason="SUCCEEDED"===e.status?"Success":e.errorReason,i+=1}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(5),a=e.t0,s=0,n.forEach(function(e){n[s].data.reason=a.data.message,s+=1});case 18:P(a),l(n);case 20:case"end":return e.stop()}},e,null,[[5,13]])}))).apply(this,arguments)}g=me().createElement(de.Fragment,null,me().createElement("div",{className:"modal-message multi-item",dangerouslySetInnerHTML:{__html:r(e,S)}}),void 0!==o&&0<o.length&&me().createElement("div",{className:"modal-multi-item-images-container"},g.map(function(e,t){return me().createElement($t,{key:e.itemId,itemsCount:o.length,item:e,index:t})})));return me().createElement(me().Fragment,null,me().createElement(Re,{isTwoStepVerificationActive:f,stopTwoStepVerification:function(){v(!0),b(!1)},systemFeedbackService:m}),me().createElement(Jt,{title:n||t,body:g,neutralButtonText:r(Wt.cancelAction),actionButtonText:p,onAction:function(){var t=!1;o.forEach(function(e){t=t||e.twoStepVerificationRequired}),t&&!h?y():(function(){I.apply(this,arguments)}(),c())},onNeutral:function(){s()},footerText:me().createElement(C,{expectedPrice:a,currentRobuxBalance:i}),loading:u,actionButtonShow:o}))}var ar=a.resources;function ir(e){var t=e.currentUserBalance,r=e.items,n=e.itemDetails,a=e.onBuyButtonClick,i=e.onConfirm,s=e.onCancel,o=e.onTransactionComplete,l=e.productSurface,c=e.systemFeedbackService,u=e.translate,d=!1,m=0,p=0,f=[],b=Qt((0,de.useState)(!1),2),e=b[0],y=b[1];if(!qe.authenticatedUser.isAuthenticated)return me().createElement("div",{className:"sign-in"},me().createElement(P.Button,{className:"action-button batch-buy-purchase-button sign-in-button",variant:P.Button.variants.growth,size:P.Button.sizes.large,onClick:function(){var e;window.location=(e={ReturnUrl:window.location.pathname},pe.urlService.getUrlWithQueries("/login",e))}},u(ar.buyAction)));if(void 0===n||0<n.length&&n[0]&&n[0].loading||void 0===t)return me().createElement("div",{className:"loading"},me().createElement(P.Button,{className:"action-button batch-buy-purchase-button",variant:P.Button.variants.growth,size:P.Button.sizes.large,isDisabled:!0},me().createElement(P.Loading,null)));if(0===n.length||n[0]&&n[0].loadFailure)return me().createElement(P.Button,{className:"action-button batch-buy-purchase-button",variant:P.Button.variants.growth,size:P.Button.sizes.large,isDisabled:!0},u(ar.buyAction));n.forEach(function(e){var t;(void 0!==(t=e).collectibleItemId?t.isMarketPlaceEnabled&&t.isPurchasable||t.resellerAvailable:t.isMarketPlaceEnabled&&(t.resellerAvailable||t.isPurchasable))&&(d=!0),e.premiumPriceInRobux&&qe.authenticatedUser.isPremiumUser?p+=e.premiumPriceInRobux:e.lowestPrice?m+=e.lowestPrice:e.price&&(m+=e.price),e.resellerAvailable&&f.push(e)});var g=m+p-t;return me().createElement(me().Fragment,null,me().createElement("div",null,me().createElement(P.Button,{className:"action-button batch-buy-purchase-button",variant:P.Button.variants.growth,size:P.Button.sizes.large,onClick:function(){(0<g?Zt:rr).open(),a()},isDisabled:!d},e?me().createElement(P.Loading,null):u(ar.buyAction))),0<g&&me().createElement("div",{id:"insufficient-funds-modal"},me().createElement(Kt,{robuxNeeded:g})),me().createElement("div",{id:"multi-item-purchase-modal"},me().createElement(tr,{title:u(ar.buyNowAction),expectedTotalPrice:m+p,items:r,itemDetails:n,resaleItems:f,currentRobuxBalance:t,onCancel:function(){var e;null==rr||null!==(e=rr.close)&&void 0!==e&&e.call(rr),s()},onTransactionComplete:function(e){y(!1),o(e)},onAction:function(){var e;null==rr||null!==(e=rr.close)&&void 0!==e&&e.call(rr),y(!0),i()},loading:!1,productSurface:l,systemFeedbackService:c})))}ir.propTypes={currentUserBalance:i().number.isRequired,items:i().arrayOf(i().shape({id:i().number.isRequired,itemType:i().string.isRequired})).isRequired,itemDetails:i().arrayOf(i().shape({productId:i().number.isRequired,price:i().number.isRequired,itemName:i().string.isRequired,itemType:i().string.isRequired,assetTypeDisplayName:i().string.isRequired,sellerName:i().string.isRequired,expectedSellerId:i().number.isRequired,isPurchasable:i().bool.isRequired,isOwned:i().bool.isRequired,isPlugin:i().bool.isRequired,itemDetailItemId:i().number.isRequired,loading:i().bool.isRequired,loadFailure:i().bool,userQualifiesForPremiumPrices:i().bool.isRequired,premiumPriceInRobux:i().number,isAuthenticated:i().bool.isRequired,resellerAvailable:i().bool.isRequired,firstReseller:i().shape({seller:{name:i().string.isRequired,id:i().number.isRequired},userAssetId:i().number.isRequired}),isMarketPlaceEnabled:i().bool.isRequired})).isRequired,onBuyButtonClick:i().func.isRequired,onConfirm:i().func.isRequired,onCancel:i().func.isRequired,onTransactionComplete:i().func.isRequired,productSurface:i().string.isRequired,systemFeedbackService:i().func.isRequired,translate:i().func.isRequired};var sr=(0,s.withTranslations)(ir,o.purchasingResources);function or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cr(e){var t=e.items,r=e.onBuyButtonClick,n=e.systemFeedbackService,a=e.onConfirm,i=e.onCancel,s=e.onTransactionComplete,o=e.productSurface,l=e.translate,c=or((0,de.useState)(void 0),2),e=c[0],u=c[1];(0,de.useEffect)(function(){qe.authenticatedUser.isAuthenticated&&he(qe.authenticatedUser.id).then(function(e){u(e.data.robux)}).catch(function(){u(void 0)})},[]);c=Lt(t).itemDetails;return me().createElement(sr,{currentUserBalance:e,items:t,itemDetails:c,systemFeedbackService:n,onBuyButtonClick:r,onConfirm:a,onCancel:i,onTransactionComplete:s,productSurface:o,translate:l})}cr.propTypes={items:i().arrayOf(i().object).isRequired,onBuyButtonClick:i().func,onConfirm:i().func,onCancel:i().func,onTransactionComplete:i().func,systemFeedbackService:i().func.isRequired,productSurface:i().string,translate:i().func.isRequired},cr.defaultProps={onBuyButtonClick:function(){},onConfirm:function(){},onCancel:function(){},onTransactionComplete:function(){},productSurface:"SHOPPING_CART_WEB"},xt=(0,s.withTranslations)(cr,o.purchasingResources),er=a.errorTypeIds,window.RobloxItemPurchase={createTransactionFailureModal:u,createInsufficientFundsModal:R,createPriceChangedModal:O,createPurchaseVerificationModal:j,createPurchaseConfirmationModal:ye,createItemPurchase:Be,errorTypeIds:er,getMetaData:be,BalanceAfterSaleText:C,PriceLabel:E,AssetName:B,TransactionVerb:H,BatchBuyPriceContainer:xt},(0,pe.ready)(function(){var e=document.getElementById("display-price-container");e&&(0,t.render)(me().createElement(St,null),e)})}();
//# sourceMappingURL=https://js.rbxcdn.com/4c0900aae5eb8095c453d2878ee3a466-itemPurchase.bundle.min.js.map

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("ItemPurchase");